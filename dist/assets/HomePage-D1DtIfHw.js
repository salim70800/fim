import{r as l,j as e,L as $}from"./react-core-Cfr18xtl.js";import{s as p}from"./supabase-BWlcyJjF.js";import{P as k,C as E,a as L}from"./lucide-Dk-NOH9t.js";import{C as S}from"./ContentCard-Dvg_uoT_.js";import{S as D}from"./SEO-DBayxXnw.js";import"./vendor-CKCmSFOu.js";import"./supabase-Mw2DHMHY.js";function I({slides:i}){const[u,m]=l.useState(0),[f,c]=l.useState(!0);l.useEffect(()=>{if(!f||i.length===0)return;const s=setInterval(()=>{m(o=>(o+1)%i.length)},5e3);return()=>clearInterval(s)},[f,i.length]);const b=s=>{m(s),c(!1)},v=()=>{m(s=>s===0?i.length-1:s-1),c(!1)},j=()=>{m(s=>(s+1)%i.length),c(!1)};return i.length===0?null:(i[u],e.jsxs("div",{className:"relative w-full h-[500px] md:h-[600px] overflow-hidden",onMouseEnter:()=>c(!1),onMouseLeave:()=>c(!0),children:[i.map((s,o)=>e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-extra-slow ${o===u?"opacity-100":"opacity-0"}`,children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:s.backdropUrl,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neutral-950/90 via-neutral-950/60 to-neutral-950/80"})]}),e.jsx("div",{className:"relative container mx-auto px-4 h-full flex items-center",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-hero font-bold text-neutral-200 mb-4 leading-tight",children:s.title}),e.jsx("p",{className:"text-body-large text-neutral-400 mb-6 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-8 text-small text-neutral-400",children:[s.year&&e.jsx("span",{children:s.year}),s.rating&&e.jsxs("span",{className:"flex items-center gap-1",children:["⭐ ",s.rating.toFixed(1)]}),s.genres&&s.genres.length>0&&e.jsx("div",{className:"flex gap-2",children:s.genres.slice(0,3).map((y,N)=>e.jsx("span",{className:"bg-neutral-800 px-3 py-1 rounded-full",children:y},N))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs($,{to:`/watch/${s.type}/${s.id}`,className:"px-8 py-3 bg-primary-500 text-neutral-950 rounded-md font-semibold flex items-center gap-2 hover:bg-primary-400 hover:shadow-glow-primary transition-all duration-fast",children:[e.jsx(k,{className:"w-5 h-5 fill-current"}),e.jsx("span",{children:"مشاهدة الآن"})]}),e.jsx("button",{className:"px-8 py-3 bg-transparent border-2 border-primary-500 text-primary-500 rounded-md font-semibold hover:bg-primary-500 hover:text-neutral-950 transition-all duration-fast",children:"المزيد من التفاصيل"})]})]})})]},s.id)),e.jsx("button",{onClick:v,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-neutral-800/50 hover:bg-neutral-700 text-neutral-200 rounded-full backdrop-blur-sm transition-all duration-fast opacity-0 hover:opacity-100 group-hover:opacity-100","aria-label":"Previous slide",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsx("button",{onClick:j,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-neutral-800/50 hover:bg-neutral-700 text-neutral-200 rounded-full backdrop-blur-sm transition-all duration-fast opacity-0 hover:opacity-100 group-hover:opacity-100","aria-label":"Next slide",children:e.jsx(L,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:i.map((s,o)=>e.jsx("button",{onClick:()=>b(o),className:`w-2 h-2 rounded-full transition-all duration-normal ${o===u?"w-8 bg-primary-500 shadow-glow-primary":"bg-neutral-600 hover:bg-neutral-500"}`,"aria-label":`Go to slide ${o+1}`},o))})]}))}function F(){const[i,u]=l.useState([]),[m,f]=l.useState([]),[c,b]=l.useState([]),[v,j]=l.useState([]),[s,o]=l.useState([]),[y,N]=l.useState([]),[q,A]=l.useState(!0);l.useEffect(()=>{P()},[]);const P=async()=>{try{const{data:t}=await p.from("content").select("*").eq("is_featured",!0).eq("status","published").order("imdb_rating",{ascending:!1}).limit(5);if(t){const r=t.map(a=>({id:a.id,title:a.title_ar,description:a.description||"لا يوجد وصف متاح",year:a.year,backdropUrl:a.banner_url||a.poster_url||"https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=1200",type:a.type,rating:a.imdb_rating,genres:[]}));u(r)}const{data:g}=await p.from("content").select(`
          *,
          content_genres (
            genres (name_ar)
          )
        `).eq("type","movie").eq("status","published").order("created_at",{ascending:!1}).limit(12);if(g){const r=g.map(a=>({...a,rating:a.imdb_rating,views:0,genres:a.content_genres?.map(h=>h.genres?.name_ar).filter(Boolean)||[]}));f(r)}const{data:x}=await p.from("content").select(`
          *,
          content_genres (
            genres (name_ar)
          )
        `).eq("type","series").eq("status","published").order("created_at",{ascending:!1}).limit(12);if(x){const r=x.map(a=>({...a,rating:a.imdb_rating,views:0,genres:a.content_genres?.map(h=>h.genres?.name_ar).filter(Boolean)||[]}));b(r)}const{data:d}=await p.from("content").select(`
          *,
          content_genres (
            genres (name_ar)
          )
        `).eq("type","anime").eq("status","published").order("created_at",{ascending:!1}).limit(12);if(d){const r=d.map(a=>({...a,rating:a.imdb_rating,views:0,genres:a.content_genres?.map(h=>h.genres?.name_ar).filter(Boolean)||[]}));j(r)}const n=[...(g||[]).map(r=>({...r,type:"movie",rating:r.imdb_rating})),...(x||[]).map(r=>({...r,type:"series",rating:r.imdb_rating})),...(d||[]).map(r=>({...r,type:"anime",rating:r.imdb_rating}))].sort((r,a)=>(a.rating||0)-(r.rating||0)).slice(0,8);N(n.map(r=>({...r,views:0,genres:r.content_genres?.map(a=>a.genres?.name_ar).filter(Boolean)||[]})));const{data:C}=await p.from("episodes").select(`
          *,
          content:content_id (
            id,
            title_ar,
            poster_url,
            type
          )
        `).eq("status","published").order("created_at",{ascending:!1}).limit(12);if(C){const r=C.map(a=>({...a,content:Array.isArray(a.content)?a.content[0]:a.content})).filter(a=>a.content);o(r)}}catch(t){console.error("Error fetching content:",t)}finally{A(!1)}},_=({title:t,items:g,type:x})=>{const d=l.useState(null),w=n=>{d[0]&&d[0].scrollBy({left:n==="right"?300:-300,behavior:"smooth"})};return e.jsxs("section",{className:"mb-16",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-h2 font-semibold text-neutral-200",children:t}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w("left"),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200 rounded-lg transition-all duration-fast",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>w("right"),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200 rounded-lg transition-all duration-fast",children:e.jsx(E,{className:"w-5 h-5"})})]})]}),e.jsx("div",{ref:n=>d[1](n),className:"flex gap-4 overflow-x-auto hide-scrollbar pb-4",children:g.map(n=>e.jsx("div",{className:"flex-shrink-0 w-64",children:e.jsx(S,{id:n.id,title:n.title_ar,year:n.year,rating:n.rating,views:n.views,posterUrl:n.poster_url,genres:n.genres,type:x,language:n.language})},n.id))})]})};return q?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-neutral-400 text-xl",children:"جاري التحميل..."})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(D,{title:"الرئيسية",description:"منصة البث العربية الشاملة - شاهد أحدث الأفلام والمسلسلات وحلقات الأنمي مجاناً بجودة عالية مع سيرفرات متعددة",keywords:"أفلام عربية, مسلسلات عربية, أنمي مدبلج, بث مباشر, مشاهدة مجانية, أفلام اون لاين, مسلسلات اون لاين"}),e.jsx(I,{slides:i}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-h2 font-semibold text-neutral-200 mb-6",children:"أحدث الحلقات"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsx("a",{href:`/episode/${t.id}`,className:"group bg-neutral-900 rounded-lg overflow-hidden hover:bg-neutral-800 transition-all duration-300 border border-neutral-800 hover:border-orange-500",children:e.jsxs("div",{className:"flex gap-4 p-4",children:[e.jsxs("div",{className:"relative w-24 h-32 flex-shrink-0 rounded overflow-hidden",children:[e.jsx("img",{src:t.content?.poster_url||"https://via.placeholder.com/96x128?text=No+Image",alt:t.content?.title_ar,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx(k,{className:"w-8 h-8 text-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between min-w-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-1 line-clamp-1",children:t.content?.title_ar}),e.jsxs("p",{className:"text-neutral-400 text-sm mb-2",children:[t.season_number?`الموسم ${t.season_number} - `:"","الحلقة ",t.episode_number]}),e.jsx("p",{className:"text-neutral-500 text-xs line-clamp-2",children:t.title_ar})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500 mt-2",children:[t.duration&&e.jsxs("span",{children:[t.duration," دقيقة"]}),t.air_date&&e.jsxs("span",{children:["• ",new Date(t.air_date).toLocaleDateString("ar-EG",{month:"short",day:"numeric"})]})]})]})]})},t.id))})]}),e.jsx(_,{title:"أحدث الأفلام",items:m,type:"movie"}),e.jsx(_,{title:"أحدث المسلسلات",items:c,type:"series"}),e.jsx(_,{title:"أحدث حلقات الأنمي",items:v,type:"anime"}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-h2 font-semibold text-neutral-200 mb-6",children:"أعلى تقييماً"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:y.map(t=>e.jsx(S,{id:t.id,title:t.title_ar,year:t.year,rating:t.rating,views:t.views,posterUrl:t.poster_url,genres:t.genres,type:t.type,language:t.language},t.id))})]})]})]})}export{F as default};
